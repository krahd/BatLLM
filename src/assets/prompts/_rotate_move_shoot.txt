Using your coordinates and rotation and your opponent's coordinates and rotation calculate if it would make sense to shoot.
There are only two places where the oponent can be, P1: its current position, or P2, his position if moved forward a distance of STEP_LENGTH. Analogally, Q1 is our current possition and Q2 our position if we moved a distance of STEP_LENGTH forrward.
Check whether a line from our position in the ditection of our rotation would intersect with a circle of radius bot.radius centered in p1 or in p2, and store the result in a boolean variable named X1. Do the same but checking whether he wouold hit us in eiter Q1 or Q2 it in a boolean named X2.
Store in L1 the state of our shield and in L2 the state of the opponent shield.
Store in S1 the state of our shield.

Now follow this decision table to select your output.

X1 & !S1-> B
X2 & !S1 -> S
X1 & !S1 & X2 -> M
X1 & !S1 & !X2 -> R to face the opponent
S1 -> M